"use strict";var T=Object.create;var k=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var j=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of w(e))!P.call(o,s)&&s!==t&&k(o,s,{get:()=>e[s],enumerable:!(r=v(e,s))||r.enumerable});return o};var l=(o,e,t)=>(t=o!=null?T(O(o)):{},j(e||!o||!o.__esModule?k(t,"default",{value:o,enumerable:!0}):t,o));var R=l(require("@hapi/hapi"));var c=require("nanoid"),a=l(require("fs")),h=async(o,e)=>{let{name:t,year:r,author:s,summary:f,publisher:B,pageCount:y,readPage:S,reading:g}=o.payload,q=(0,c.nanoid)(16),i=new Date().toISOString(),n={bookId:q,name:t,year:r,author:s,summary:f,publisher:B,pageCount:y,readPage:S,finished:!1,reading:g,insertedAt:i,updatedAt:i};console.log(n);let d="src/books.json",p=a.readFileSync(d,"utf-8");console.log(p);let u=JSON.parse(p).concat([n]);return console.log(u),a.writeFileSync(d,JSON.stringify(u)),e.response({status:"success",message:"Buku berhasil ditambahkan",data:n}).code(201)};var m=[{method:"POST",path:"/books",handler:h},{method:"GET",path:"/books",handler:(o,e)=>"Hello World!"},{method:"GET",path:"/books/{bookId}",handler:(o,e)=>"Book Library Returned."},{method:"PUT",path:"/books/{bookId}",handler:(o,e)=>"Book Data Modified."},{method:"DELETE",path:"/books/{bookId}",handler:(o,e)=>"Book Deleted."}];var b=require("fs"),D=async()=>{let o=R.default.server({port:9e3,host:"localhost"});o.route(m),(0,b.writeFileSync)("src/books.json","[]"),await o.start(),console.log(`Server berjalan pada ${o.info.uri}`)};D();
