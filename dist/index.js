"use strict";var T=Object.create;var l=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var j=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of w(e))!P.call(o,s)&&s!==t&&l(o,s,{get:()=>e[s],enumerable:!(r=v(e,s))||r.enumerable});return o};var u=(o,e,t)=>(t=o!=null?T(O(o)):{},j(e||!o||!o.__esModule?l(t,"default",{value:o,enumerable:!0}):t,o));var R=u(require("@hapi/hapi"));var h=require("nanoid"),n=u(require("fs")),c=async(o,e)=>{let{name:t,year:r,author:s,summary:b,publisher:y,pageCount:B,readPage:S,reading:q}=o.payload,g=(0,h.nanoid)(16),i=new Date().toISOString(),d={id:g,name:t,year:r,author:s,summary:b,publisher:y,pageCount:B,readPage:S,finished:!1,reading:q,insertedAt:i,updatedAt:i};console.log(d);let p="src/books.json",k=n.readFileSync(p,"utf-8");console.log(k);let a=JSON.parse(k).concat([d]);return console.log(a),n.writeFileSync(p,JSON.stringify(a)),e.response({books:a})};var m=[{method:"POST",path:"/books",handler:c},{method:"GET",path:"/books",handler:(o,e)=>"Hello World!"},{method:"GET",path:"/books/{bookId}",handler:(o,e)=>"Book Library Returned."},{method:"PUT",path:"/books/{bookId}",handler:(o,e)=>"Book Data Modified."},{method:"DELETE",path:"/books/{bookId}",handler:(o,e)=>"Book Deleted."}];var f=require("fs"),D=async()=>{let o=R.default.server({port:9e3,host:"localhost"});o.route(m),(0,f.writeFileSync)("src/books.json","[]"),await o.start(),console.log(`Server berjalan pada ${o.info.uri}`)};D();
