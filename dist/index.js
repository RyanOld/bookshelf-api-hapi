"use strict";var T=Object.create;var m=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var j=(o,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of P(e))!O.call(o,s)&&s!==t&&m(o,s,{get:()=>e[s],enumerable:!(a=v(e,s))||a.enumerable});return o};var l=(o,e,t)=>(t=o!=null?T(w(o)):{},j(e||!o||!o.__esModule?m(t,"default",{value:o,enumerable:!0}):t,o));var f=l(require("@hapi/hapi"));var h=require("nanoid"),r=l(require("fs")),c=async(o,e)=>{let{name:t,year:a,author:s,summary:g,publisher:B,pageCount:n,readPage:i,reading:y}=o.payload;if(t===void 0)return e.response({status:"fail",message:"Gagal menambahkan buku. Mohon isi nama buku"}).code(400);if(i>n)return e.response({status:"fail",message:"Gagal menambahkan buku. readPage tidak boleh lebih besar dari pageCount"}).code(400);let d=(0,h.nanoid)(16),u=new Date().toISOString(),p={bookId:d,name:t,year:a,author:s,summary:g,publisher:B,pageCount:n,readPage:i,finished:!1,reading:y,insertedAt:u,updatedAt:u};console.log(p);let k="src/books.json",S=r.readFileSync(k,"utf-8"),q=JSON.parse(S).concat([p]);return r.writeFileSync(k,JSON.stringify(q)),e.response({status:"success",message:"Buku berhasil ditambahkan",data:{bookId:d}}).code(201)};var b=[{method:"POST",path:"/books",handler:c},{method:"GET",path:"/books",handler:(o,e)=>"Hello World!"},{method:"GET",path:"/books/{bookId}",handler:(o,e)=>"Book Library Returned."},{method:"PUT",path:"/books/{bookId}",handler:(o,e)=>"Book Data Modified."},{method:"DELETE",path:"/books/{bookId}",handler:(o,e)=>"Book Deleted."}];var R=require("fs"),D=async()=>{let o=f.default.server({port:9e3,host:"localhost"});o.route(b),(0,R.writeFileSync)("src/books.json","[]"),await o.start(),console.log(`Server berjalan pada ${o.info.uri}`)};D();
