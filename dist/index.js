"use strict";var T=Object.create;var k=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var j=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of w(e))!P.call(o,s)&&s!==t&&k(o,s,{get:()=>e[s],enumerable:!(r=v(e,s))||r.enumerable});return o};var l=(o,e,t)=>(t=o!=null?T(O(o)):{},j(e||!o||!o.__esModule?k(t,"default",{value:o,enumerable:!0}):t,o));var b=l(require("@hapi/hapi"));var m=require("nanoid"),a=l(require("fs")),c=async(o,e)=>{let{name:t,year:r,author:s,summary:R,publisher:g,pageCount:B,readPage:y,reading:S}=o.payload;if(t===void 0)return e.response({status:"fail",message:"Gagal menambahkan buku. Mohon isi nama buku"}).code(400);let q=(0,m.nanoid)(16),i=new Date().toISOString(),n={bookId:q,name:t,year:r,author:s,summary:R,publisher:g,pageCount:B,readPage:y,finished:!1,reading:S,insertedAt:i,updatedAt:i};console.log(n);let d="src/books.json",p=a.readFileSync(d,"utf-8");console.log(p);let u=JSON.parse(p).concat([n]);return console.log(u),a.writeFileSync(d,JSON.stringify(u)),e.response({status:"success",message:"Buku berhasil ditambahkan",data:n}).code(201)};var h=[{method:"POST",path:"/books",handler:c},{method:"GET",path:"/books",handler:(o,e)=>"Hello World!"},{method:"GET",path:"/books/{bookId}",handler:(o,e)=>"Book Library Returned."},{method:"PUT",path:"/books/{bookId}",handler:(o,e)=>"Book Data Modified."},{method:"DELETE",path:"/books/{bookId}",handler:(o,e)=>"Book Deleted."}];var f=require("fs"),D=async()=>{let o=b.default.server({port:9e3,host:"localhost"});o.route(h),(0,f.writeFileSync)("src/books.json","[]"),await o.start(),console.log(`Server berjalan pada ${o.info.uri}`)};D();
